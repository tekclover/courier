<div class="componentBody">
    <div class="d-flex justify-content-between align-items-center">
        <p class="componentHeader f600 mb-0">User Role - {{ this.pageToken.pageflow }}</p>
    </div>
    <div class="w-75 mt-4 mx-auto">
       
            <p-stepper [(activeStep)]="active">
                <p-stepperPanel>
                    <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
                        <div class="d-flex flex-column align-items-center" (click)="onClick.emit()">
                            <div class="d-flex justify-content-center  align-items-center">
                                <p *ngIf="active == 0;" class="circle borderCircle mb-0">1</p>
                                <img *ngIf="active != 0;" src="./assets/dashboard/tick.png" alt="" srcset="">
                            </div>
                            <div>
                                <p class="mb-0 mt-2 f600 textBlack">General</p>
                            </div>

                        </div>
                    </ng-template>
                    <ng-template pTemplate="content" let-nextCallback="nextCallback">
                        <form [formGroup]="form">
                        <div class="row">
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0">Language</p>
                                <p-dropdown (onChange)="onLanguageChange($event)" placeholder="Select" filter="true" class="w-100"
                                    [filter]="true" [options]="languageIdList" formControlName="languageId"
                                    [style]="{'width': '100%', 'margin-top': '0.3rem', 'margin-bottom': '0.3rem'}"
                                    [panelStyle]="{'width':'20%'}" appendTo="body">
                                </p-dropdown>
                                <mat-error *ngIf="errorHandling('languageId')">{{getErrorMessage()}}</mat-error>
                            </div>
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0">Company</p>
                                <p-dropdown (onChange)="onCompanyChange($event)" placeholder="Select" filter="true" class="w-100"
                                    [filter]="true" [options]="companyIdList" formControlName="companyId"
                                    [style]="{'width': '100%', 'margin-top': '0.3rem', 'margin-bottom': '0.3rem'}"
                                    [panelStyle]="{'width':'20%'}" appendTo="body">
                                </p-dropdown>
                                <mat-error *ngIf="errorHandling('companyId')">{{getErrorMessage()}}</mat-error>
                            </div>
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0 required">Role ID</p>
                                <input formControlName="roleId"
                                    [ngClass]="form.get('roleId')?.invalid && form.get('roleId')?.dirty ? 'invalid' : ''"
                                    class="w-100" pInputText pKeyFilter="num" placeholder="Enter" />
                                <mat-error *ngIf="errorHandling('roleId')"
                                    class="text-danger"><small>{{getErrorMessage()}}</small></mat-error>
                            </div>
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0 required">Role Name</p>
                                <input formControlName="userRoleName"
                                [ngClass]="form.get('userRoleName')?.invalid && submitted ? 'ng-invalid ng-dirty' : ''"
                                    class="w-100" pInputText pKeyFilter="alphanum" placeholder="Enter" />
                                <mat-error *ngIf="errorHandling('userRoleName')"
                                    class="text-danger"><small>{{getErrorMessage()}}</small></mat-error>
                            </div>
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0 required">Status</p>
                                <div class="card flex">
                                    <p-dropdown [options]="status" [style]="{'width': '100%'}" appendTo="body"
                                        formControlName="statusId" placeholder="Select " />
                                </div>
                                <mat-error *ngIf="errorHandling('statusId')"
                                    class="text-danger"><small>{{getErrorMessage()}}</small></mat-error>
                            </div>
                        </div>
                        </form>
                        <div class="d-flex mt-1 justify-content-end" style="position: absolute; right: 5%; bottom: 5%">
                            <button class="buttom1 textBlack mx-1" routerLink="/main/idMaster/userrole">
                                Cancel
                            </button>
                            <button
                                class="buttom1 bgBlack text-white mx-1" (click)="nextCallback.emit()">
                                Next
                            </button>
                        </div>
                    </ng-template>
                </p-stepperPanel>
                <p-stepperPanel *ngIf="this.pageToken.pageflow == 'New' ">
                    <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
                        <div class="d-flex flex-column align-items-center" (click)="onClick.emit()">
                            <div class="d-flex justify-content-center  align-items-center">
                                <p *ngIf="active == 0;" class="circle borderCircle mb-0">2</p>
                                <img *ngIf="active != 0;" src="./assets/dashboard/tick.png" alt="" srcset="">
                            </div>
                            <div>
                                <p class="mb-0 mt-2 f600 textBlack">Screens</p>
                            </div>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="content" let-prevCallback="nextCallback">
                        <div class="row d-flex justify-content">    
                            <mat-tab-group class="mx-8">
                                <mat-tab *ngFor="let element of menuList; let j = index" >
                                    <ng-template mat-tab-label >
                                        <ul class="nav" >
                                            <li class="nav-item">
                                                <p class="nav-link"
                                                    href="">
                                                    {{element.mainMenu}}
                                                </p>
                                            </li>
                                        </ul>
                                    </ng-template>
                                    <div class="scrolltable mr-1">
                                        <div class="col-12 col-sm-12 col-md-4 col-lg-4 pt-3 pb-3 ">
                                            <!-- <mat-checkbox
                                                (change)="checkUncheckAll(element.mainMenu,$event)">
                                                Select All
                                            </mat-checkbox> -->
                                            <p-checkbox [binary]="true"
                                                            (onChange)="onChange(element.mainMenu, $event)"></p-checkbox>
                                                Select All    
                                        </div>
                                        <div class="tableProperties">
                                        <p-table [value]="element.Menu" class="custom-table" [scrollable]="true"
                                        selectionMode="single" scrollHeight="calc(78vh - 19.8rem)"
                                         styleClass="p-datatable-sm">
                                            <ng-template pTemplate="header" let-columns>
                                                <tr>
                                                    <th style="text-align: center;">S.No</th>
                                                    <th style="text-align: center;">Menu</th>
                                                    <th style="text-align: center;">Select All</th>
                                                    <th style="text-align: center;">Create / Modify</th>
                                                    <th style="text-align: center;">Display</th>
                                                    <th style="text-align: center;">Delete</th>
                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-menu let-i="rowIndex">
                                                <tr>
                                                    <td style="text-align: center;">{{ i + 1 }}</td>
                                                    <td style="text-align: center;">{{ menu.subMenuName }}</td>
                                                    <td style="text-align: center;">
                                                        <p-checkbox 
                                                            [binary]="true" 
                                                            [ngModel]="menu.createUpdate && menu.view && menu.delete"
                                                            (onChange)="onChange(menu, $event)"></p-checkbox>
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <p-checkbox 
                                                            [binary]="true" 
                                                            [(ngModel)]="menu.createUpdate"></p-checkbox>
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <p-checkbox 
                                                            [binary]="true" 
                                                            [(ngModel)]="menu.view"></p-checkbox>
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <p-checkbox 
                                                            [binary]="true" 
                                                            [(ngModel)]="menu.delete"></p-checkbox>
                                                    </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        </div>
                                    </div>
                                    <!-- <div class="d-flex justify-content-end mr-2">
                                        Total Records: {{element.Menu.length}}
                                    </div> -->
                                </mat-tab>

                            </mat-tab-group>
                        </div>
                        <div class="d-flex mt-1 justify-content-end" style="position: absolute; right: 5%; bottom: 5%;">
                            <button class="buttom1 textBlack mx-1" (click)="prevCallback.emit()">Back</button>
                            <button
                                class="buttom1 bgBlack text-white mx-1" (click)="save()">{{this.pageToken.pageflow !=
                                "New" ? "Update" : "Save" }}</button>
                        </div>
                    </ng-template>
                </p-stepperPanel>
                <p-stepperPanel *ngIf="this.pageToken.pageflow != 'New'">
                    <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
                        <div class="d-flex flex-column align-items-center">
                            <p class="circle mb-0" [ngClass]="active == 2 ? 'borderCircle' : 'disable text-muted'">2</p>
                        </div>
                        <div>
                            <p class="mb-0 mt-2 f600" [ngClass]="active == 2 ? 'textBlack f600' : 'text-muted' ">Admin
                            </p>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="content" let-prevCallback="prevCallback">
                        <div class="row">
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0">Created By</p>
                                <input type="text" formControlName="createdBy" class=" w-100" pInputText
                                    placeholder="Enter" />
                            </div>
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0">Created On</p>
                                <input type="text" formControlName="createdOn" class=" w-100" pInputText
                                    placeholder="Enter" />
                            </div>
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0">Updated By</p>
                                <input type="text" formControlName="updatedBy" class=" w-100" pInputText
                                    placeholder="Enter" />
                            </div>
                            <div class="col-6 marginFieldNew borderRadius12">
                                <p class="formControlLabel f600 textBlack mb-0">Updated On</p>
                                <input type="text" formControlName="updatedOn" class=" w-100" pInputText
                                    placeholder="Enter" />
                            </div>
                        </div>
                        <div class="d-flex mt-1 justify-content-end" style="position: absolute; right: 5%; bottom: 5%;">
                            <button class="buttom1 textBlack mx-1" (click)="prevCallback.emit()">Back</button>
                            <button
                                class="buttom1 bgBlack text-white mx-1" (click)="save()">{{this.pageToken.pageflow !=
                                "New" ? "Update" : "Save" }}</button>
                        </div>
                    </ng-template>
                </p-stepperPanel>
            </p-stepper>
    </div>
</div>